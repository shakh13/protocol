{
  "version": 3,
  "sources": ["../../react-to-pdf/src/index.ts", "../../react-to-pdf/src/converter.ts", "../../react-to-pdf/src/constants.ts", "../../react-to-pdf/src/utils.ts"],
  "sourcesContent": ["import { useRef, useCallback } from \"react\";\nimport html2canvas from \"html2canvas\";\n\nimport Converter from \"./converter\";\nimport { Options, TargetElementFinder, UsePDFResult } from \"./types\";\nimport { buildConvertOptions } from \"./utils\";\nimport jsPDF from \"jspdf\";\nexport { Resolution, Margin } from \"./constants\";\nexport type { Options };\n\nconst getTargetElement = (\n  targetRefOrFunction: TargetElementFinder\n): HTMLElement | null | undefined => {\n  if (typeof targetRefOrFunction === \"function\") {\n    return targetRefOrFunction();\n  }\n  return targetRefOrFunction?.current;\n};\n\nexport const usePDF = (usePDFoptions?: Options): UsePDFResult => {\n  const targetRef = useRef();\n  const toPDF = useCallback(\n    (toPDFoptions?: Options): Promise<InstanceType<typeof jsPDF>> => {\n      return generatePDF(targetRef, usePDFoptions ?? toPDFoptions);\n    },\n    [targetRef, usePDFoptions]\n  );\n  return { targetRef, toPDF };\n};\n\nconst generatePDF = async (\n  targetRefOrFunction: TargetElementFinder,\n  customOptions?: Options\n): Promise<InstanceType<typeof jsPDF>> => {\n  const options = buildConvertOptions(customOptions);\n  const targetElement = getTargetElement(targetRefOrFunction);\n  if (!targetElement) {\n    console.error(\"Unable to get the target element.\");\n    return;\n  }\n  const canvas = await html2canvas(targetElement, {\n    useCORS: options.canvas.useCORS,\n    logging: options.canvas.logging,\n    scale: options.resolution,\n    ...options.overrides?.canvas,\n  });\n  const converter = new Converter(canvas, options);\n  const pdf = converter.convert();\n  switch (options.method) {\n    case \"build\":\n      return pdf;\n    case \"open\": {\n      window.open(pdf.output(\"bloburl\"), \"_blank\");\n      return pdf;\n    }\n    case \"save\":\n    default: {\n      const pdfFilename = options.filename ?? `${new Date().getTime()}.pdf`;\n      await pdf.save(pdfFilename, { returnPromise: true });\n      return pdf;\n    }\n  }\n};\n\nexport default generatePDF;\n", "import jsPDF from \"jspdf\";\nimport { MM_TO_PX } from \"./constants\";\nimport { ConversionOptions, Options } from \"./types\";\n\nexport default class Converter {\n  pdf: InstanceType<typeof jsPDF>;\n  canvas: HTMLCanvasElement;\n  options: Options;\n  constructor(canvas: HTMLCanvasElement, options: ConversionOptions) {\n    this.canvas = canvas;\n    this.options = options;\n    this.pdf = new jsPDF({\n      format: this.options.page.format,\n      orientation: this.options.page.orientation,\n      ...this.options.overrides?.pdf,\n      unit: \"mm\",\n    });\n  }\n  getMarginTopMM() {\n    const margin =\n      typeof this.options.page.margin === \"object\"\n        ? this.options.page.margin.top\n        : this.options.page.margin;\n    return Number(margin);\n  }\n  getMarginLeftMM() {\n    const margin =\n      typeof this.options.page.margin === \"object\"\n        ? this.options.page.margin.left\n        : this.options.page.margin;\n    return Number(margin);\n  }\n  getMarginRightMM() {\n    const margin =\n      typeof this.options.page.margin === \"object\"\n        ? this.options.page.margin.right\n        : this.options.page.margin;\n    return Number(margin);\n  }\n  getMarginBottomMM() {\n    const margin =\n      typeof this.options.page.margin === \"object\"\n        ? this.options.page.margin.bottom\n        : this.options.page.margin;\n    return Number(margin);\n  }\n  getMarginTop() {\n    return this.getMarginTopMM() * MM_TO_PX;\n  }\n  getMarginBottom() {\n    return this.getMarginBottomMM() * MM_TO_PX;\n  }\n  getMarginLeft() {\n    return this.getMarginLeftMM() * MM_TO_PX;\n  }\n  getMarginRight() {\n    return this.getMarginRightMM() * MM_TO_PX;\n  }\n  getScale() {\n    return this.options.resolution;\n  }\n  getPageHeight() {\n    return this.getPageHeightMM() * MM_TO_PX;\n  }\n  getPageHeightMM() {\n    return this.pdf.internal.pageSize.height;\n  }\n  getPageWidthMM() {\n    return this.pdf.internal.pageSize.width;\n  }\n  getPageWidth() {\n    return this.getPageWidthMM() * MM_TO_PX;\n  }\n  getOriginalCanvasWidth() {\n    return this.canvas.width / this.getScale();\n  }\n  getOriginalCanvasHeight() {\n    return this.canvas.height / this.getScale();\n  }\n  getCanvasPageAvailableHeight() {\n    return (\n      this.getPageAvailableHeight() *\n      this.getScale() *\n      this.getHorizontalFitFactor()\n    );\n  }\n  getPageAvailableWidth() {\n    return this.getPageWidth() - (this.getMarginLeft() + this.getMarginRight());\n  }\n  getPageAvailableHeight() {\n    return (\n      this.getPageHeight() - (this.getMarginTop() + this.getMarginBottom())\n    );\n  }\n  getPageAvailableWidthMM() {\n    return this.getPageAvailableWidth() / MM_TO_PX;\n  }\n  getPageAvailableHeightMM() {\n    return this.getPageAvailableHeight() / MM_TO_PX;\n  }\n  getNumberPages() {\n    return Math.ceil(this.canvas.height / this.getCanvasPageAvailableHeight());\n  }\n  getHorizontalFitFactor() {\n    if (this.getPageAvailableWidth() < this.getOriginalCanvasWidth()) {\n      return this.getOriginalCanvasWidth() / this.getPageAvailableWidth();\n    }\n    return 1;\n  }\n  getCanvasOffsetY(pageNumber: number) {\n    return this.getCanvasPageAvailableHeight() * (pageNumber - 1);\n  }\n  getCanvasHeightLeft(pageNumber: number) {\n    return this.canvas.height - this.getCanvasOffsetY(pageNumber);\n  }\n  getCanvasPageHeight(pageNumber: number) {\n    if (this.canvas.height < this.getCanvasPageAvailableHeight()) {\n      return this.canvas.height;\n    }\n    const canvasHeightPending = this.getCanvasHeightLeft(pageNumber);\n    return canvasHeightPending < this.getCanvasPageAvailableHeight()\n      ? canvasHeightPending\n      : this.getCanvasPageAvailableHeight();\n  }\n  getCanvasPageWidth() {\n    return this.canvas.width;\n  }\n  createCanvasPage(pageNumber: number): HTMLCanvasElement {\n    const canvasPageWidth = this.getCanvasPageWidth();\n    const canvasPageHeight = this.getCanvasPageHeight(pageNumber);\n    const canvasPage = document.createElement(\"canvas\");\n    canvasPage.setAttribute(\"width\", String(canvasPageWidth));\n    canvasPage.setAttribute(\"height\", String(canvasPageHeight));\n    const ctx = canvasPage.getContext(\"2d\");\n    ctx.drawImage(\n      this.canvas,\n      0,\n      this.getCanvasOffsetY(pageNumber),\n      this.canvas.width,\n      canvasPageHeight,\n      0,\n      0,\n      this.canvas.width,\n      canvasPageHeight\n    );\n    return canvasPage;\n  }\n  convert(): InstanceType<typeof jsPDF> {\n    let pageNumber = 1;\n    const numberPages = this.getNumberPages();\n    while (pageNumber <= numberPages) {\n      if (pageNumber > 1) {\n        this.pdf.addPage(\n          this.options.page.format,\n          this.options.page.orientation\n        );\n      }\n      const canvasPage = this.createCanvasPage(pageNumber);\n      const pageImageDataURL = canvasPage.toDataURL(\n        this.options.canvas.mimeType,\n        this.options.canvas.qualityRatio\n      );\n      this.pdf.setPage(pageNumber);\n      this.pdf.addImage({\n        imageData: pageImageDataURL,\n        width:\n          canvasPage.width /\n          (this.getScale() * MM_TO_PX * this.getHorizontalFitFactor()),\n        height:\n          canvasPage.height /\n          (this.getScale() * MM_TO_PX * this.getHorizontalFitFactor()),\n        x: this.getMarginLeftMM(),\n        y: this.getMarginTopMM(),\n      });\n      pageNumber += 1;\n    }\n    return this.pdf;\n  }\n}\n", "import { ConversionOptions } from \"./types\";\n\nexport const MM_TO_PX = 3.77952755906;\n\nexport enum Resolution {\n  LOW = 1,\n  NORMAL = 2,\n  MEDIUM = 3,\n  HIGH = 7,\n  EXTREME = 12,\n}\n\nexport enum Margin {\n  NONE = 0,\n  SMALL = 5,\n  MEDIUM = 10,\n  LARGE = 25,\n}\n\nexport const DEFAULT_OPTIONS: Readonly<ConversionOptions> = {\n  method: \"save\",\n  resolution: Resolution.MEDIUM,\n  page: {\n    margin: Margin.NONE,\n    format: \"A4\",\n    orientation: \"portrait\",\n  },\n  canvas: {\n    mimeType: \"image/jpeg\",\n    qualityRatio: 1,\n    useCORS: true,\n    logging: false,\n  },\n  overrides: {},\n};\n", "import { DEFAULT_OPTIONS } from \"./constants\";\nimport { ConversionOptions, Options } from \"./types\";\n\nexport const buildConvertOptions = (options?: Options): ConversionOptions => {\n  if (!options) {\n    return DEFAULT_OPTIONS;\n  }\n  return {\n    ...DEFAULT_OPTIONS,\n    ...options,\n    canvas: { ...DEFAULT_OPTIONS.canvas, ...options.canvas },\n    page: { ...DEFAULT_OPTIONS.page, ...options.page },\n  };\n};\n"],
  "mappings": "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",
  "names": ["Resolution", "Margin"]
}
